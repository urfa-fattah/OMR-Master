<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMR Master Pro</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        bangla: ['Hind Siliguri', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'pop-in': 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        popIn: { '0%': { opacity: '0', transform: 'scale(0.9)' }, '100%': { opacity: '1', transform: 'scale(1)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-attachment: fixed;
            background: radial-gradient(circle at top left, #f8fafc, #e2e8f0); 
        }
        .dark body {
            background: radial-gradient(circle at top left, #0f172a, #1e293b);
        }
        
        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .dark .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }
        .dark .nav-glass {
            background: rgba(15, 23, 42, 0.85);
            border-bottom: 1px solid rgba(30, 41, 59, 0.8);
        }

        /* Range Slider Customization */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            margin-top: -8px; 
            box-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 4px;
        }
        .dark input[type=range]::-webkit-slider-runnable-track {
            background: #475569;
        }

        /* Hide scrollbar for clean look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="text-slate-800 dark:text-slate-100 transition-colors duration-300 antialiased selection:bg-blue-500 selection:text-white">
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext, useRef } = React;

        // --- Translations Dictionary ---
        const translations = {
            en: {
                app_name: "OMR Master",
                pro: "PRO",
                dashboard: "Dashboard",
                active_session: "Active Session",
                analytics: "Analytics",
                about: "About",
                report: "Report Issues",
                guideline: "Guidelines",
                contact: "Contact",
                donation: "Donation",
                resume: "Resume Exam",
                exams_taken: "Exams Taken",
                avg_score: "Avg Score",
                last_active: "Last Active",
                new_config: "New Exam Configuration",
                config_sub: "Choose a preset or customize your parameters",
                lbl_exam_name: "Exam Name",
                lbl_questions: "Questions",
                lbl_duration: "Duration (Minutes)",
                lbl_correct: "Correct (+)",
                lbl_wrong: "Wrong (-)",
                lbl_options: "Options",
                lbl_pdf: "Question Paper URL (Drive/PDF)",
                btn_start: "Start Examination",
                footer_credit: "Designed & Developed by",
                footer_rights: "All Rights Reserved.",
                modal_about_title: "About OMR Master",
                modal_about_desc: "OMR Master Pro is an advanced self-testing tool designed to simulate real-world exam environments.",
                modal_contact_title: "Contact Us",
                modal_report_title: "Report an Issue",
                modal_guide_title: "Usage Guidelines",
                presets: "Quick Presets:",
                preset_bcs: "BCS Prelim",
                preset_med: "Medical",
                preset_hsc: "HSC Mock",
                preset_custom: "Custom",
                err_name_req: "Exam name is required",
                mode_standard: "Standard",
                mode_advanced: "Advanced"
            },
            bn: {
                app_name: "ওএমআর মাস্টার",
                pro: "প্রো",
                dashboard: "ড্যাশবোর্ড",
                active_session: "চলমান সেশন",
                analytics: "বিশ্লেষণ",
                about: "আমাদের সম্পর্কে",
                report: "সমস্যা জানান",
                guideline: "নির্দেশাবলী",
                contact: "যোগাযোগ",
                donation: "অনুদান",
                resume: "পরীক্ষা শুরু করুন",
                exams_taken: "মোট পরীক্ষা",
                avg_score: "গড় স্কোর",
                last_active: "সর্বশেষ সক্রিয়",
                new_config: "নতুন পরীক্ষার কনফিগারেশন",
                config_sub: "একটি প্রিসেট বাছাই করুন অথবা নিজের মত সাজান",
                lbl_exam_name: "পরীক্ষার নাম",
                lbl_questions: "প্রশ্ন সংখ্যা",
                lbl_duration: "সময় (মিনিট)",
                lbl_correct: "সঠিক (+)",
                lbl_wrong: "ভুল (-)",
                lbl_options: "অপশন",
                lbl_pdf: "প্রশ্নপত্রের লিংক (ড্রাইভ/পিডিএফ)",
                btn_start: "পরীক্ষা শুরু করুন",
                footer_credit: "ডিজাইন ও ডেভেলপমেন্টে",
                footer_rights: "সর্বস্বত্ব সংরক্ষিত।",
                modal_about_title: "ওএমআর মাস্টার সম্পর্কে",
                modal_about_desc: "ওএমআর মাস্টার প্রো একটি উন্নত সেলফ-টেস্টিং টুল যা আপনাকে বাস্তব পরীক্ষার পরিবেশের অভিজ্ঞতা দেবে।",
                modal_contact_title: "যোগাযোগ করুন",
                modal_report_title: "সমস্যা রিপোর্ট করুন",
                modal_guide_title: "ব্যবহারের নিয়মাবলী",
                presets: "কুইক প্রিসেট:",
                preset_bcs: "বিসিএস প্রিলি",
                preset_med: "মেডিকেল",
                preset_hsc: "এইচএসসি",
                preset_custom: "কাস্টম",
                err_name_req: "পরীক্ষার নাম আবশ্যক",
                mode_standard: "স্ট্যান্ডার্ড",
                mode_advanced: "অ্যাডভান্সড"
            }
        };

        // --- Icons (Lucide) ---
        const Icons = {
            Home: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            Play: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
            BarChart: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>,
            Settings: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
            Sun: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>,
            Moon: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>,
            Globe: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            Info: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>,
            Flag: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>,
            Mail: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>,
            Book: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>,
            Heart: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>,
            X: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
            Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>,
            FileText: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>,
            Link: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
        };

        const AppContext = createContext();

        const Modal = ({ title, isOpen, onClose, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" onClick={onClose}></div>
                    <div className="relative w-full max-w-lg glass-panel rounded-2xl p-6 shadow-2xl animate-pop-in border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-900/90">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400">
                                {title}
                            </h3>
                            <button onClick={onClose} className="p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition">
                                <Icons.X />
                            </button>
                        </div>
                        <div className="text-slate-600 dark:text-slate-300">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };

        const Navbar = ({ activePage }) => {
            const { lang, setLang, darkMode, setDarkMode } = useContext(AppContext);
            const [isOpen, setIsOpen] = useState(false);
            const [sessionActive, setSessionActive] = useState(false);
            const t = (k) => translations[lang][k];

            useEffect(() => {
                const session = localStorage.getItem('omr_current_session');
                if (session) setSessionActive(true);
            }, []);

            const toggleTheme = () => {
                setDarkMode(!darkMode);
                document.documentElement.classList.toggle('dark');
                localStorage.setItem('theme', !darkMode ? 'dark' : 'light');
            };

            const toggleLang = () => {
                const newLang = lang === 'en' ? 'bn' : 'en';
                setLang(newLang);
                localStorage.setItem('lang', newLang);
            };

            // Main navigation links
            const links = [
                { name: t('dashboard'), href: 'index.html', icon: Icons.Home, active: activePage === 'home' },
                { name: t('active_session'), href: 'exam.html', icon: Icons.Play, active: activePage === 'exam', hidden: !sessionActive },
                { name: t('analytics'), href: 'analytics.html', icon: Icons.BarChart, active: activePage === 'analytics' },
            ];

            // Secondary navigation links - now linking to separate HTML files
            const secondaryLinks = [
                { name: t('about'), icon: Icons.Info, href: 'about.html' },
                { name: t('guideline'), icon: Icons.Book, href: 'guidelines.html' },
                { name: t('report'), icon: Icons.Flag, href: 'report.html' },
                { name: t('contact'), icon: Icons.Mail, href: 'contact.html' },
                { name: t('donation'), icon: Icons.Heart, href: 'donate.html' },
            ];

            return (
                <nav className="fixed top-0 inset-x-0 z-50 nav-glass transition-all duration-300 shadow-sm">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between items-center h-20">
                            <div className="flex items-center gap-3 cursor-pointer group" onClick={() => window.location.href='index.html'}>
                                <div className="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-500/20 transition-transform group-hover:scale-105 group-hover:rotate-3">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4"/></svg>
                                </div>
                                <div className={lang === 'bn' ? 'font-bangla' : ''}>
                                    <h1 className="text-xl font-bold text-slate-800 dark:text-white tracking-tight leading-none">{t('app_name')}</h1>
                                    <span className="text-[10px] font-bold tracking-widest text-blue-600 dark:text-blue-400 uppercase">{t('pro')}</span>
                                </div>
                            </div>
                            <div className="hidden lg:flex items-center gap-2">
                                <div className="flex items-center gap-1 mr-4 bg-slate-100 dark:bg-slate-800 p-1.5 rounded-full border border-slate-200 dark:border-slate-700">
                                    {links.map(link => !link.hidden && (
                                        <a key={link.name} href={link.href} className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all duration-200 ${link.active ? 'bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm' : 'text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200'}`}>
                                            <link.icon /> <span className={lang === 'bn' ? 'font-bangla' : ''}>{link.name}</span>
                                        </a>
                                    ))}
                                </div>
                                {secondaryLinks.map((item, idx) => (
                                    <a key={idx} href={item.href} title={item.name} className="p-2.5 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors">
                                        <item.icon />
                                    </a>
                                ))}
                                <div className="h-6 w-px bg-slate-200 dark:bg-slate-700 mx-2"></div>
                                <button onClick={toggleLang} className="flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-bold text-sm hover:scale-105 transition-transform">
                                    <Icons.Globe /> {lang === 'en' ? 'BN' : 'EN'}
                                </button>
                                <button onClick={toggleTheme} className="p-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:rotate-12 transition-transform">
                                    {darkMode ? <Icons.Sun /> : <Icons.Moon />}
                                </button>
                            </div>
                            <div className="lg:hidden flex items-center gap-3">
                                <button onClick={toggleLang} className="text-sm font-bold text-indigo-600 dark:text-indigo-400">{lang === 'en' ? 'BN' : 'EN'}</button>
                                <button onClick={toggleTheme} className="text-slate-600 dark:text-slate-300">{darkMode ? <Icons.Sun /> : <Icons.Moon />}</button>
                                <button onClick={() => setIsOpen(!isOpen)} className="p-2 text-slate-500 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition">
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16M4 18h16"} /></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    {isOpen && (
                        <div className="lg:hidden border-t border-slate-100 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl absolute w-full shadow-xl">
                            <div className="p-4 space-y-2">
                                {links.map(link => !link.hidden && (
                                    <a key={link.name} href={link.href} className={`flex items-center gap-3 px-4 py-3 rounded-xl text-base font-medium ${link.active ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300' : 'text-slate-600 dark:text-slate-400'}`}>
                                        <link.icon /> <span className={lang === 'bn' ? 'font-bangla' : ''}>{link.name}</span>
                                    </a>
                                ))}
                                <hr className="border-slate-100 dark:border-slate-800 my-2" />
                                {secondaryLinks.map((item, idx) => (
                                    <a key={idx} href={item.href} className="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-base font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800">
                                        <item.icon /> <span className={lang === 'bn' ? 'font-bangla' : ''}>{item.name}</span>
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>
            );
        };

        const Footer = () => {
            const { lang } = useContext(AppContext);
            const t = (k) => translations[lang][k];
            const currentYear = new Date().getFullYear();
            return (
                <footer className="mt-12 border-t border-slate-200 dark:border-slate-800 bg-white/50 dark:bg-slate-900/50 backdrop-blur-lg">
                    <div className="max-w-7xl mx-auto px-4 py-8 flex flex-col items-center justify-center gap-4 text-center">
                        <div className="flex items-center gap-2 text-slate-800 dark:text-slate-200 font-bold text-lg">
                            <span className="w-8 h-8 bg-blue-600 text-white flex items-center justify-center rounded-lg">UR</span>
                            Urfa Hasan Fattah & Rifat
                        </div>
                        <p className={`text-sm text-slate-500 dark:text-slate-400 ${lang === 'bn' ? 'font-bangla' : ''}`}>
                            {t('footer_credit')} <span className="font-semibold text-slate-700 dark:text-slate-300">Urfa Hasan Fattah & Rifatuzzaman Rifat</span>. &copy; {currentYear} {t('footer_rights')}
                        </p>
                        <a 
                            href="donate.html" 
                            className="mt-2 inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold rounded-xl shadow-lg shadow-pink-500/20 hover:shadow-xl hover:shadow-pink-500/30 transition-all duration-300 hover:scale-105"
                        >
                            <Icons.Heart className="w-5 h-5" />
                            <span className={lang === 'bn' ? 'font-bangla' : ''}>{t('donation')}</span>
                        </a>
                    </div>
                </footer>
            );
        };

        const Home = () => {
            const { lang } = useContext(AppContext);
            const t = (k) => translations[lang][k];
            
            const [resume, setResume] = useState(null);
            
            // Initial Config
            const initialConfig = {
                examName: '', questionCount: 50, optionsCount: 4, duration: 60,
                positiveMarks: 1, negativeMarks: 0.25, pdfLink: '', targetAccuracy: 90
            };
            const [config, setConfig] = useState(initialConfig);

            // Presets Data
            const presets = [
                { id: 'bcs', name: t('preset_bcs'), conf: { questionCount: 200, duration: 120, positiveMarks: 1, negativeMarks: 0.5, optionsCount: 4 } },
                { id: 'med', name: t('preset_med'), conf: { questionCount: 100, duration: 60, positiveMarks: 1, negativeMarks: 0.25, optionsCount: 4 } },
                { id: 'hsc', name: t('preset_hsc'), conf: { questionCount: 25, duration: 25, positiveMarks: 1, negativeMarks: 0, optionsCount: 4 } }
            ];

            const [stats, setStats] = useState({ total: 0, avgScore: 0, lastExam: 'Never' });

            useEffect(() => {
                const session = JSON.parse(localStorage.getItem('omr_current_session'));
                if (session && session.timeLeft > 0) setResume(session);

                const history = JSON.parse(localStorage.getItem('omr_history') || '[]');
                if (history.length > 0) {
                    const totalScore = history.reduce((acc, curr) => acc + parseFloat(curr.score), 0);
                    setStats({
                        total: history.length,
                        avgScore: (totalScore / history.length).toFixed(1),
                        lastExam: new Date(history[history.length - 1].date).toLocaleDateString()
                    });
                }
            }, []);

            const handleChange = (e) => {
                const { name, value } = e.target;
                setConfig(prev => ({
                    ...prev,
                    [name]: ['examName', 'pdfLink'].includes(name) ? value : Number(value)
                }));
            };

            const applyPreset = (pConf) => {
                setConfig(prev => ({ ...prev, ...pConf }));
            };

            const startExam = (e) => {
                e.preventDefault();
                if(!config.examName.trim()) return;
                
                const newSession = {
                    config,
                    answers: {},
                    flags: [],
                    timeLeft: config.duration * 60,
                    startTime: Date.now(),
                    status: 'active'
                };
                localStorage.setItem('omr_current_session', JSON.stringify(newSession));
                window.location.href = 'exam.html';
            };

            return (
                <div className={`min-h-screen pt-24 flex flex-col ${lang === 'bn' ? 'font-bangla' : ''}`}>
                    <Navbar activePage="home" />

                    <main className="flex-grow px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto w-full">
                        
                        {/* Hero Header */}
                        <div className="text-center mb-10 animate-fade-in relative">
                            <div className="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl pointer-events-none"></div>
                            <h1 className="relative text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white tracking-tight mb-3">
                                {t('app_name')} <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500">Pro</span>
                            </h1>
                            <p className="text-lg text-slate-500 dark:text-slate-400 max-w-2xl mx-auto">
                                {lang === 'en' ? 'Professional OMR practice suite with advanced analytics, real-time tracking, and split-screen PDF support.' : 'উন্নত অ্যানালিটিক্স, রিয়েল-টাইম ট্র্যাকিং এবং স্প্লিট-স্ক্রিন পিডিএফ সাপোর্ট সহ প্রফেশনাল ওএমআর প্র্যাকটিস স্যুট।'}
                            </p>
                        </div>

                        {/* Stats Row */}
                        <div className="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                            {[
                                { label: t('exams_taken'), val: stats.total, color: 'text-slate-800 dark:text-white', delay: '0.1s' },
                                { label: t('avg_score'), val: stats.avgScore, color: 'text-blue-600 dark:text-blue-400', delay: '0.2s' },
                                { label: t('last_active'), val: stats.lastExam, color: 'text-slate-800 dark:text-white', delay: '0.3s' },
                            ].map((s, i) => (
                                <div key={i} className="glass-panel p-4 rounded-2xl flex flex-col justify-center items-center text-center animate-slide-up hover:shadow-lg transition-all duration-300" style={{animationDelay: s.delay}}>
                                    <div className="text-sm text-slate-500 dark:text-slate-400 font-medium mb-1">{s.label}</div>
                                    <div className={`text-2xl font-bold ${s.color}`}>{s.val}</div>
                                </div>
                            ))}
                            <div className="glass-panel p-4 rounded-2xl bg-gradient-to-br from-blue-600 to-blue-700 text-white flex flex-col justify-center items-center text-center shadow-lg shadow-blue-500/30 animate-slide-up cursor-pointer hover:scale-105 transition duration-300" onClick={() => window.location.href='analytics.html'} style={{animationDelay: '0.4s'}}>
                                <div className="text-white/80 text-sm font-medium mb-1">{t('analytics')}</div>
                                <div className="text-sm font-bold flex items-center gap-1">View All &rarr;</div>
                            </div>
                        </div>

                        {/* Resume Card */}
                        {resume && (
                            <div className="mb-8 glass-panel p-6 rounded-2xl border-l-4 border-green-500 shadow-xl transform transition hover:-translate-y-1 cursor-pointer bg-white/80 dark:bg-slate-800/80" onClick={() => window.location.href='exam.html'}>
                                <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                                    <div className="w-full">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="px-2 py-1 rounded bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-xs font-bold uppercase tracking-wide animate-pulse">{t('active_session')}</span>
                                            <h3 className="font-bold text-xl text-slate-800 dark:text-white">{resume.config.examName}</h3>
                                        </div>
                                        <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mb-2 overflow-hidden">
                                            <div className="bg-gradient-to-r from-green-500 to-emerald-400 h-2.5 rounded-full transition-all duration-1000" style={{ width: `${(resume.timeLeft / (resume.config.duration * 60)) * 100}%` }}></div>
                                        </div>
                                    </div>
                                    <button className="whitespace-nowrap bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-green-500/30 transition w-full md:w-auto">
                                        {t('resume')}
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Main Configuration Form - ADVANCED */}
                        <div className="glass-panel rounded-3xl shadow-2xl overflow-hidden animate-slide-up mb-10 border border-white/60 dark:border-slate-700">
                            {/* Form Header & Presets */}
                            <div className="bg-white/50 dark:bg-slate-800/50 border-b border-white/50 dark:border-slate-700 p-6 sm:px-8">
                                <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4">
                                    <div className="flex items-center gap-3">
                                        <div className="p-2.5 bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-xl">
                                            <Icons.Settings />
                                        </div>
                                        <div>
                                            <h2 className="text-xl font-bold text-slate-800 dark:text-white">{t('new_config')}</h2>
                                            <p className="text-sm text-slate-500 dark:text-slate-400">{t('config_sub')}</p>
                                        </div>
                                    </div>
                                    {/* Quick Presets */}
                                    <div className="flex flex-wrap gap-2">
                                        <span className="text-xs font-bold text-slate-400 uppercase self-center mr-1 hidden sm:block">{t('presets')}</span>
                                        {presets.map(p => (
                                            <button key={p.id} type="button" onClick={() => applyPreset(p.conf)}
                                                className="px-3 py-1.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-blue-50 dark:hover:bg-blue-900/40 text-xs font-bold text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition border border-transparent hover:border-blue-200 dark:hover:border-blue-800">
                                                {p.name}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            <form onSubmit={startExam} className="p-6 sm:p-8 space-y-8">
                                
                                {/* 1. Exam Name Input (Large) */}
                                <div className="relative group">
                                    <div className="absolute top-0 left-0 flex h-full items-center pl-4 pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors">
                                        <Icons.FileText />
                                    </div>
                                    <input 
                                        required 
                                        name="examName" 
                                        id="examName" 
                                        type="text" 
                                        value={config.examName}
                                        onChange={handleChange}
                                        placeholder=" "
                                        className="peer w-full bg-slate-50 dark:bg-slate-900/50 border-2 border-slate-200 dark:border-slate-700 rounded-2xl pl-12 pr-4 py-4 text-lg font-semibold text-slate-800 dark:text-white placeholder-transparent focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:bg-white dark:focus:bg-slate-900 transition-all shadow-sm"
                                    />
                                    <label htmlFor="examName" 
                                        className="absolute left-12 top-4 text-slate-500 dark:text-slate-400 text-lg transition-all 
                                        peer-placeholder-shown:text-slate-500 peer-placeholder-shown:top-4 peer-placeholder-shown:text-lg cursor-text
                                        peer-focus:-top-2.5 peer-focus:text-sm peer-focus:bg-white peer-focus:dark:bg-slate-900 peer-focus:px-2 peer-focus:text-blue-500 peer-focus:font-bold
                                        peer-not-placeholder-shown:-top-2.5 peer-not-placeholder-shown:text-sm peer-not-placeholder-shown:bg-white peer-not-placeholder-shown:dark:bg-slate-900 peer-not-placeholder-shown:px-2 peer-not-placeholder-shown:text-blue-500">
                                        {t('lbl_exam_name')}
                                    </label>
                                </div>

                                {/* 2. Sliders Section (Two Columns) */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    {/* Questions Slider */}
                                    <div className="bg-slate-50/50 dark:bg-slate-800/30 p-5 rounded-2xl border border-slate-100 dark:border-slate-700">
                                        <div className="flex justify-between items-center mb-4">
                                            <label className="text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2">
                                                <Icons.BarChart /> {t('lbl_questions')}
                                            </label>
                                            <span className="bg-white dark:bg-slate-700 px-3 py-1 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 text-blue-600 dark:text-blue-400 font-bold font-mono">
                                                {config.questionCount}
                                            </span>
                                        </div>
                                        <input 
                                            type="range" 
                                            name="questionCount" 
                                            min="5" max="200" step="5" 
                                            value={config.questionCount} 
                                            onChange={handleChange}
                                            className="w-full h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                        />
                                        <div className="flex justify-between text-[10px] text-slate-400 mt-2 font-mono">
                                            <span>5</span><span>100</span><span>200</span>
                                        </div>
                                    </div>

                                    {/* Duration Slider */}
                                    <div className="bg-slate-50/50 dark:bg-slate-800/30 p-5 rounded-2xl border border-slate-100 dark:border-slate-700">
                                        <div className="flex justify-between items-center mb-4">
                                            <label className="text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> 
                                                {t('lbl_duration')}
                                            </label>
                                            <span className="bg-white dark:bg-slate-700 px-3 py-1 rounded-lg shadow-sm border border-slate-200 dark:border-slate-600 text-blue-600 dark:text-blue-400 font-bold font-mono">
                                                {config.duration}m
                                            </span>
                                        </div>
                                        <input 
                                            type="range" 
                                            name="duration" 
                                            min="5" max="180" step="5" 
                                            value={config.duration} 
                                            onChange={handleChange}
                                            className="w-full h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                        />
                                        <div className="flex justify-between text-[10px] text-slate-400 mt-2 font-mono">
                                            <span>5m</span><span>90m</span><span>180m</span>
                                        </div>
                                    </div>
                                </div>

                                {/* 3. Scoring & Options Grid */}
                                <div className="p-6 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-200 dark:border-slate-700">
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                                        
                                        {/* Correct Marks */}
                                        <div className="relative">
                                            <label className="text-xs font-bold text-slate-400 uppercase mb-2 block">{t('lbl_correct')}</label>
                                            <div className="flex items-center">
                                                <input 
                                                    name="positiveMarks" type="number" step="0.1" value={config.positiveMarks} 
                                                    onChange={handleChange}
                                                    className="w-full bg-white dark:bg-slate-800 border border-green-200 dark:border-green-900/50 rounded-xl px-4 py-3 text-center font-bold text-green-600 dark:text-green-400 focus:ring-2 ring-green-500 outline-none" 
                                                />
                                            </div>
                                        </div>

                                        {/* Negative Marks */}
                                        <div className="relative">
                                            <label className="text-xs font-bold text-slate-400 uppercase mb-2 block">{t('lbl_wrong')}</label>
                                            <div className="flex items-center">
                                                <input 
                                                    name="negativeMarks" type="number" step="0.1" value={config.negativeMarks} 
                                                    onChange={handleChange}
                                                    className="w-full bg-white dark:bg-slate-800 border border-red-200 dark:border-red-900/50 rounded-xl px-4 py-3 text-center font-bold text-red-500 dark:text-red-400 focus:ring-2 ring-red-500 outline-none" 
                                                />
                                            </div>
                                        </div>

                                        {/* Options Layout */}
                                        <div className="col-span-2">
                                            <label className="text-xs font-bold text-slate-400 uppercase mb-2 block">{t('lbl_options')}</label>
                                            <div className="grid grid-cols-2 gap-2">
                                                <button type="button" 
                                                    onClick={() => setConfig(p => ({...p, optionsCount: 4}))}
                                                    className={`px-4 py-3 rounded-xl text-sm font-bold border transition-all ${config.optionsCount === 4 ? 'bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/20' : 'bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700 hover:bg-slate-50'}`}>
                                                    ABCD
                                                </button>
                                                <button type="button" 
                                                    onClick={() => setConfig(p => ({...p, optionsCount: 5}))}
                                                    className={`px-4 py-3 rounded-xl text-sm font-bold border transition-all ${config.optionsCount === 5 ? 'bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/20' : 'bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700 hover:bg-slate-50'}`}>
                                                    ABCDE
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* 4. PDF Link Input */}
                                <div className="relative group pt-2">
                                    <div className="absolute top-2 left-0 flex h-full items-start pt-3.5 pl-4 pointer-events-none text-slate-400">
                                        <Icons.Link />
                                    </div>
                                    <input 
                                        name="pdfLink" 
                                        id="pdfLink" 
                                        type="url" 
                                        value={config.pdfLink}
                                        onChange={handleChange}
                                        placeholder=" "
                                        className="peer w-full bg-slate-50 dark:bg-slate-900/50 border-2 border-slate-200 dark:border-slate-700 rounded-2xl pl-12 pr-4 py-3 text-sm font-medium text-slate-800 dark:text-white placeholder-transparent focus:border-blue-500 dark:focus:border-blue-500 focus:outline-none focus:bg-white dark:focus:bg-slate-900 transition-all"
                                    />
                                    <label htmlFor="pdfLink" 
                                        className="absolute left-12 top-3 text-slate-500 dark:text-slate-400 text-sm transition-all 
                                        peer-placeholder-shown:text-slate-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-sm cursor-text
                                        peer-focus:-top-3 peer-focus:text-xs peer-focus:text-blue-500 peer-focus:font-bold
                                        peer-not-placeholder-shown:-top-3 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-blue-500">
                                        {t('lbl_pdf')}
                                    </label>
                                </div>

                                {/* Submit Button with Validation Logic */}
                                <button 
                                    type="submit" 
                                    disabled={!config.examName.trim()}
                                    className={`group w-full text-lg font-bold py-4 rounded-xl shadow-xl transform transition-all duration-200 flex items-center justify-center gap-2 overflow-hidden relative
                                        ${!config.examName.trim() 
                                            ? 'bg-slate-200 dark:bg-slate-800 text-slate-400 cursor-not-allowed' 
                                            : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-blue-500/20 hover:scale-[1.01]'}
                                    `}
                                >
                                    <span className="relative z-10 flex items-center gap-2">
                                        {config.examName.trim() ? <Icons.Play /> : <span className="text-xs uppercase tracking-widest">{t('err_name_req')}</span>}
                                        {config.examName.trim() && t('btn_start')}
                                    </span>
                                </button>
                            </form>
                        </div>
                    </main>

                    <Footer />
                </div>
            );
        };

        const AppWrapper = () => {
            const [lang, setLang] = useState('en');
            const [darkMode, setDarkMode] = useState(false);

            useEffect(() => {
                const savedLang = localStorage.getItem('lang');
                if (savedLang) setLang(savedLang);

                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    setDarkMode(true);
                    document.documentElement.classList.add('dark');
                }
            }, []);

            return (
                <AppContext.Provider value={{ lang, setLang, darkMode, setDarkMode }}>
                    <Home />
                </AppContext.Provider>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AppWrapper />);
    </script>
</body>
</html>
